---
import Topbar from "../components/Topbar.astro";
import Footer from "../components/Footer.astro";
import RecentCards from "../components/RecentCards.astro";
import "../styles/global.css";
import {
  SITE_TITLE,
  SITE_DESCRIPTION,
  SITE_TITLE_DEVANAGRI,
  SITE_DESCRIPTION_DEVANAGRI,
  SITE_TITLE_SEPARATOR,
  DEFAULT_ARTICLE_IMAGE,
  Tags,
} from "../utils/consts";
import { getCollection } from "astro:content";

import MetadataHead from "../components/MetadataHead.astro";
import SearchModal from "../components/SearchModal.astro";

const allpages = (await getCollection("page")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const featuredPages = allpages.filter((page) => page.data.featured);
const nonFeaturedPages = allpages.filter((page) => !page.data.featured);
const pages = [...featuredPages, ...nonFeaturedPages];

const ogSiteName = `${SITE_TITLE_DEVANAGRI} ${SITE_TITLE_SEPARATOR} ${SITE_TITLE}`;
const ogSiteDescription = `${SITE_DESCRIPTION_DEVANAGRI} ${SITE_TITLE_SEPARATOR} ${SITE_DESCRIPTION}`;
const ogArticleImage = new URL(DEFAULT_ARTICLE_IMAGE, Astro.url);

const ldSchema = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  publisher: {
    "@type": "Organization",
    name: ogSiteName,
    url: "https://brahmadev.in/",
    logo: {
      "@type": "ImageObject",
      url: "https://brahmadev.in/assets/images/brahma-icon.png",
      width: 60,
      height: 60,
    },
  },
  url: "https://brahmadev.in/",
  image: {
    "@type": "ImageObject",
    url: ogArticleImage,
    width: 1000,
    height: 661,
  },
  mainEntityOfPage: "https://brahmadev.in/",
  description: ogSiteDescription,
};
---

<!doctype html>
<html lang="en">
  <head>
    <MetadataHead />

    <link rel="canonical" href={new URL(Astro.url.pathname, Astro.site)} />

    <title>{ogSiteName}</title>

    <link rel="preload prefetch" href="/assets/images/brahma_image.png" as="image" />
    <link rel="preload" href="/assets/cosmos.mp4" as="video" />

    <meta name="title" lang="en" content={SITE_TITLE} />
    <meta name="description" lang="en" content={SITE_DESCRIPTION} />

    <meta name="title" lang="hi" content={SITE_TITLE_DEVANAGRI} />
    <meta name="description" lang="hi" content={SITE_DESCRIPTION_DEVANAGRI} />

    <meta property="og:type" content="website" />
    <meta property="og:url" content={Astro.url} />
    <meta property="og:title" content={ogSiteName} />
    <meta property="og:site_name" content={ogSiteName} />
    <meta property="og:description" content={ogSiteDescription} />

    <meta property="og:image" content={ogArticleImage} />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={Astro.url} />
    <meta property="twitter:title" content={ogSiteName} />
    <meta property="twitter:description" content={ogSiteDescription} />

    <meta property="twitter:image" content={ogArticleImage} />

    <style>
      video {
        object-fit: cover;
        filter: brightness(80%);
        opacity: 0.8;
      }
      #background-video {
        position: fixed;
        right: 0;
        bottom: 0;
        min-width: 100%;
        min-height: 100%;
        width: auto;
        height: auto;
        z-index: -1;
      }
    </style>
    <script type="application/ld+json" set:html={JSON.stringify(ldSchema)}></script>
  </head>

  <body class="bg-gray-900 min-h-screen overflow-y-scroll">
    <Topbar />
    <SearchModal />

    <!-- Background Video -->
    <div>
      <video autoplay muted loop id="background-video">
        <source src="/assets/cosmos.mp4" type="video/mp4" />
      </video>
    </div>

    <!-- Hero Section -->
    <section class="relative min-h-screen flex items-center justify-center pt-20">
      <div class="text-center z-10 max-w-6xl mx-auto px-4">
        <!-- Sacred Symbol & Image -->
        <div class="mb-8">
          <img
            src="/assets/images/brahma_image.png"
            alt="Brahma Deva Image"
            class="md:w-72 w-48 mx-auto drop-shadow-2xl"
          />
        </div>

        <!-- Sanskrit Greeting -->
        <div class="mb-6">
          <h1 class="text-4xl md:text-6xl font-bold text-yellow-400 font-serif mb-2">
            ‡§∂‡•ç‡§∞‡•Ä ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§£‡•á ‡§®‡§Æ‡§É
          </h1>
          <p class="text-xl md:text-2xl text-white/80 font-light">
            Shrƒ´ Brahma·πáe Nama·∏•
          </p>
        </div>

        <!-- Main Title -->
        <div class="bg-slate-800/60 backdrop-blur-sm rounded-2xl p-8 mb-8 border border-yellow-400/20">
          <h2 class="text-3xl md:text-5xl font-bold text-white mb-4">
            {SITE_TITLE_DEVANAGRI}
          </h2>
          <h3 class="text-2xl md:text-3xl text-yellow-300 mb-6">
            {SITE_TITLE}
          </h3>
          <p class="text-lg md:text-xl text-white/90 leading-relaxed max-w-4xl mx-auto">
            The most comprehensive digital repository of authentic Vedic and Puranic knowledge dedicated to 
            <span class="text-yellow-300 font-semibold">Lord Brahma</span> - 
            featuring sacred stotras, mantras, kavach, and scriptural wisdom.
          </p>
        </div>

        <!-- Action Buttons -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center mb-12">
          <a
            href="/tags"
            class="bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 
                   text-white font-bold py-4 px-8 rounded-full shadow-lg transform hover:scale-105 
                   transition-all duration-300 flex items-center justify-center"
          >
            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            Explore Sacred Texts
          </a>
          <a
            href="#features"
            class="bg-transparent border-2 border-yellow-400 text-yellow-400 hover:bg-yellow-400 
                   hover:text-gray-900 font-bold py-4 px-8 rounded-full transition-all duration-300 
                   flex items-center justify-center"
          >
            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            Learn More
          </a>
        </div>
      </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="relative py-20 bg-gradient-to-b from-gray-900/50 to-gray-800/50">
      <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-16">
          <h2 class="text-4xl md:text-5xl font-bold text-white mb-4">
            Sacred Knowledge Repository
          </h2>
          <p class="text-xl text-white/80 max-w-3xl mx-auto">
            Discover authentic scriptural wisdom with modern accessibility and scholarly precision
          </p>
        </div>

        <div class="grid md:grid-cols-3 gap-8">
          <!-- Authentic Sources -->
          <div class="bg-slate-800/60 backdrop-blur-sm rounded-xl p-8 border border-yellow-400/20 
                      hover:border-yellow-400/40 transition-all duration-300">
            <div class="text-yellow-400 text-4xl mb-4">üìú</div>
            <h3 class="text-2xl font-bold text-white mb-4">Authentic Sources</h3>
            <p class="text-white/80 mb-4">
              All content sourced from original Vedas, Puranas, and Itihasas with proper scriptural references
            </p>
            <ul class="text-white/70 space-y-2">
              <li>‚Ä¢ Rigveda & Other Vedic Texts</li>
              <li>‚Ä¢ 18 Major Puranas</li>
              <li>‚Ä¢ Upanishads & Tantras</li>
            </ul>
          </div>

          <!-- Multi-Script Support -->
          <div class="bg-slate-800/60 backdrop-blur-sm rounded-xl p-8 border border-yellow-400/20 
                      hover:border-yellow-400/40 transition-all duration-300">
            <div class="text-yellow-400 text-4xl mb-4">üî§</div>
            <h3 class="text-2xl font-bold text-white mb-4">Multi-Script Access</h3>
            <p class="text-white/80 mb-4">
              Sanskrit integrity preserved across multiple scripts and translations
            </p>
            <ul class="text-white/70 space-y-2">
              <li>‚Ä¢ Devanagari Script</li>
              <li>‚Ä¢ IAST Transliteration</li>
              <li>‚Ä¢ English & Hindi Translations</li>
            </ul>
          </div>

          <!-- Scholarly Metadata -->
          <div class="bg-slate-800/60 backdrop-blur-sm rounded-xl p-8 border border-yellow-400/20 
                      hover:border-yellow-400/40 transition-all duration-300">
            <div class="text-yellow-400 text-4xl mb-4">üéØ</div>
            <h3 class="text-2xl font-bold text-white mb-4">Scholarly Precision</h3>
            <p class="text-white/80 mb-4">
              Complete metadata for each mantra and stotra following traditional classification
            </p>
            <ul class="text-white/70 space-y-2">
              <li>‚Ä¢ ‡§ã‡§∑‡§ø (Rishi) Information</li>
              <li>‚Ä¢ ‡§¶‡•á‡§µ‡§§‡§æ (Devata) Details</li>
              <li>‚Ä¢ ‡§õ‡§®‡•ç‡§¶ (Chhanda) & ‡§∏‡•ç‡§µ‡§∞ (Swar)</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Categories Section -->
    <section class="relative py-20 bg-slate-900/50">
      <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-16">
          <h2 class="text-4xl md:text-5xl font-bold text-white mb-4">
            Sacred Categories
          </h2>
          <p class="text-xl text-white/80">
            Explore various forms of devotional literature dedicated to Lord Brahma
          </p>
        </div>

        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
          {Tags.map((tag) => (
            <a
              href={`/tags/${tag}`}
              class="group bg-gradient-to-br from-slate-800/80 to-slate-700/80 backdrop-blur-sm 
                     rounded-xl p-6 border border-yellow-400/20 hover:border-yellow-400/50 
                     transform hover:scale-105 transition-all duration-300 hover:shadow-2xl"
            >
              <h3 class="text-2xl font-bold text-yellow-400 mb-3 capitalize group-hover:text-yellow-300">
                {tag}
              </h3>
              <p class="text-white/70 group-hover:text-white/90 transition-colors">
                {tag === 'stotram' && 'Sacred hymns of praise and devotion'}
                {tag === 'stuti' && 'Devotional prayers and eulogies'}
                {tag === 'kavach' && 'Protective mantras and armor prayers'}
                {tag === 'namavali' && 'Collections of divine names'}
                {tag === 'suktam' && 'Vedic hymns and sacred verses'}
                {tag === 'vidhi' && 'Ritual procedures and worship methods'}
              </p>
              <div class="mt-4 text-yellow-400 group-hover:text-yellow-300">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                        d="M9 5l7 7-7 7"/>
                </svg>
              </div>
            </a>
          ))}
        </div>
      </div>
    </section>

    <!-- Recent Content Section -->
    <section class="relative py-20 bg-gradient-to-b from-gray-800/50 to-gray-900/50">
      <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-12">
          <h2 class="text-4xl md:text-5xl font-bold text-white mb-4">
            Recently Added Sacred Texts
          </h2>
          <p class="text-xl text-white/80">
            Newly digitized stotras and mantras with complete translations
          </p>
        </div>
        <RecentCards pages={pages} />
      </div>
    </section>

    <!-- Call to Action Section -->
    <section class="relative py-20 bg-gradient-to-r from-orange-900/30 to-red-900/30">
      <div class="max-w-4xl mx-auto text-center px-4">
        <h2 class="text-4xl md:text-5xl font-bold text-white mb-6">
          Begin Your Spiritual Journey
        </h2>
        <p class="text-xl text-white/90 mb-8 leading-relaxed">
          Join thousands of devotees in rediscovering the profound wisdom and divine grace of Lord Brahma 
          through authentic Vedic literature, sacred mantras, and timeless spiritual practices.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="/tags/stotram"
            class="bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 
                   text-white font-bold py-4 px-8 rounded-full shadow-lg transform hover:scale-105 
                   transition-all duration-300"
          >
            Start with Stotrams
          </a>
          <a
            href="/tags/mantra"
            class="bg-transparent border-2 border-white text-white hover:bg-white hover:text-gray-900 
                   font-bold py-4 px-8 rounded-full transition-all duration-300"
          >
            Explore Mantras
          </a>
        </div>
      </div>
    </section>

    <Footer />
  </body>
  </body>
</html>
